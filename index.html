<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SpongeBob Drawing Animation - YouTube Short</title>
        <style>
        @import url('https://fonts.googleapis.com/css2?family=Crimson+Text:wght@400;600&display=swap');
        
        body {
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            font-family: 'Crimson Text', serif;
            position: relative;
            overflow: hidden;
        }
        
        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.15) 0%, transparent 50%);
            pointer-events: none;
        }
        
        .container {
            width: 420px;
            height: 740px;
            background: #fefefe;
            position: relative;
            overflow: hidden;
            border-radius: 8px;
            transform: perspective(1000px) rotateY(-2deg) rotateX(1deg);
            box-shadow: 
                0 25px 50px rgba(0, 0, 0, 0.4),
                0 8px 16px rgba(0, 0, 0, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.8),
                inset 0 0 0 1px rgba(0, 0, 0, 0.05);
            
            /* Enhanced paper texture */
            background-image: 
                /* Main paper grain */
                radial-gradient(circle at 50% 50%, rgba(139, 69, 19, 0.02) 0.5px, transparent 0.5px),
                /* Fine texture dots */
                radial-gradient(circle at 25% 25%, rgba(160, 82, 45, 0.015) 0.3px, transparent 0.3px),
                radial-gradient(circle at 75% 75%, rgba(205, 133, 63, 0.01) 0.4px, transparent 0.4px),
                /* Subtle fiber pattern */
                linear-gradient(45deg, transparent 48%, rgba(139, 69, 19, 0.005) 49%, rgba(139, 69, 19, 0.005) 51%, transparent 52%),
                linear-gradient(-45deg, transparent 48%, rgba(160, 82, 45, 0.003) 49%, rgba(160, 82, 45, 0.003) 51%, transparent 52%),
                /* Aged paper effect */
                radial-gradient(ellipse at top, rgba(255, 248, 220, 0.3) 0%, transparent 70%),
                radial-gradient(ellipse at bottom, rgba(250, 235, 215, 0.2) 0%, transparent 70%);
            
            background-size: 
                15px 15px,
                8px 8px,
                12px 12px,
                30px 30px,
                25px 25px,
                100% 50%,
                100% 50%;
            
            background-position:
                0 0,
                5px 5px,
                -3px 8px,
                0 0,
                0 0,
                top,
                bottom;
        }
        
        .container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 30px;
            width: 2px;
            height: 100%;
            background: linear-gradient(
                to bottom,
                transparent 0%,
                rgba(255, 0, 0, 0.3) 5%,
                rgba(255, 0, 0, 0.3) 95%,
                transparent 100%
            );
            border-radius: 1px;
        }
        
        .container::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                repeating-linear-gradient(
                    transparent,
                    transparent 24px,
                    rgba(173, 216, 230, 0.15) 24px,
                    rgba(173, 216, 230, 0.15) 25px
                );
            pointer-events: none;
        }
        
        canvas {
            width: 100%;
            height: 100%;
            background: transparent;
            position: relative;
            z-index: 2;
        }
        
        .pencil {
            position: absolute;
            width: 130px;
            height: 14px;
            z-index: 10;
            opacity: 0;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            pointer-events: none;
            transform-origin: 95% 50%;
            filter: drop-shadow(0 3px 6px rgba(0, 0, 0, 0.2));
        }
        
        .pencil-body {
            width: 90px;
            height: 14px;
            background: linear-gradient(135deg, 
                #FFD700 0%, 
                #FFF200 25%, 
                #FFE55C 50%, 
                #F4C430 75%,
                #DAA520 100%);
            border-radius: 7px;
            position: relative;
            box-shadow: 
                0 3px 8px rgba(0, 0, 0, 0.25),
                inset 0 2px 0 rgba(255, 255, 255, 0.4),
                inset 0 -2px 0 rgba(0, 0, 0, 0.1),
                inset 2px 0 0 rgba(255, 255, 255, 0.2),
                inset -2px 0 0 rgba(0, 0, 0, 0.05);
        }
        
        .pencil-body::before {
            content: 'No. 2 HB';
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 7px;
            font-weight: 600;
            color: #8B4513;
            text-shadow: 0 0.5px 1px rgba(255, 255, 255, 0.3);
            font-family: 'Arial', sans-serif;
        }
        
        .pencil-body::after {
            content: '';
            position: absolute;
            top: 2px;
            left: 5px;
            right: 5px;
            height: 1px;
            background: linear-gradient(90deg, 
                transparent 0%, 
                rgba(255, 255, 255, 0.6) 50%, 
                transparent 100%);
            border-radius: 0.5px;
        }
        
        .pencil-wood {
            width: 22px;
            height: 14px;
            background: linear-gradient(135deg, 
                #DEB887 0%, 
                #D2B48C 30%, 
                #CD853F 70%,
                #8B4513 100%);
            border-radius: 0 7px 7px 0;
            position: absolute;
            right: -22px;
            top: 0;
            box-shadow: 
                inset 3px 0 0 rgba(139, 69, 19, 0.3),
                0 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        .pencil-wood::before {
            content: '';
            position: absolute;
            top: 3px;
            right: 3px;
            bottom: 3px;
            width: 8px;
            background: linear-gradient(90deg, 
                rgba(160, 82, 45, 0.3) 0%, 
                rgba(139, 69, 19, 0.5) 100%);
            border-radius: 0 4px 4px 0;
        }
        
        .pencil-tip {
            width: 16px;
            height: 5px;
            background: linear-gradient(135deg, 
                #2C2C2C 0%, 
                #1a1a1a 50%,
                #000000 100%);
            position: absolute;
            right: -38px;
            top: 4.5px;
            clip-path: polygon(0 0, 100% 50%, 0 100%);
            box-shadow: 
                0 2px 4px rgba(0, 0, 0, 0.6),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }
        
        .pencil-eraser {
            width: 10px;
            height: 12px;
            background: linear-gradient(135deg, 
                #FF69B4 0%, 
                #FF1493 50%,
                #DC143C 100%);
            border-radius: 5px;
            position: absolute;
            left: -10px;
            top: 1px;
            box-shadow: 
                0 2px 4px rgba(0, 0, 0, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.4),
                inset 0 -1px 0 rgba(0, 0, 0, 0.2);
        }
        
        .pencil-eraser::before {
            content: '';
            position: absolute;
            top: 2px;
            left: 2px;
            right: 2px;
            height: 1px;
            background: rgba(255, 255, 255, 0.5);
            border-radius: 0.5px;
        }
        
        .pencil-metal {
            width: 14px;
            height: 14px;
            background: linear-gradient(135deg, 
                #E6E6FA 0%, 
                #C0C0C0 25%,
                #808080 50%,
                #A9A9A9 75%,
                #D3D3D3 100%);
            border-radius: 7px;
            position: absolute;
            left: -14px;
            top: 0;
            box-shadow: 
                0 2px 4px rgba(0, 0, 0, 0.3),
                inset 0 2px 0 rgba(255, 255, 255, 0.6),
                inset 0 -2px 0 rgba(0, 0, 0, 0.2),
                inset 2px 0 0 rgba(255, 255, 255, 0.3),
                inset -2px 0 0 rgba(0, 0, 0, 0.1);
        }
        
        .pencil-metal::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 8px;
            height: 1px;
            background: rgba(0, 0, 0, 0.2);
            transform: translate(-50%, -50%);
            border-radius: 0.5px;
        }
        
        .drawing-dust {
            position: absolute;
            width: 4px;
            height: 4px;
            background: radial-gradient(circle, #f0f0f0 0%, #ddd 100%);
            border-radius: 50%;
            opacity: 0;
            animation: dustFall 1s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
        }
        
        @keyframes dustFall {
            0% { 
                opacity: 0.8; 
                transform: translateY(0) scale(1) rotate(0deg); 
            }
            50% {
                opacity: 0.4;
                transform: translateY(12px) scale(0.7) rotate(180deg);
            }
            100% { 
                opacity: 0; 
                transform: translateY(25px) scale(0.2) rotate(360deg); 
            }
        }
        
        @media (max-width: 480px) {
            .container {
                width: 90vw;
                height: 80vh;
                transform: none;
            }
            
            .pencil {
                width: 110px;
                height: 12px;
            }
            
            .pencil-body {
                width: 75px;
                height: 12px;
            }
        }
        
        /* Additional subtle animations */
        .container {
            animation: subtleFloat 6s ease-in-out infinite;
        }
        
        @keyframes subtleFloat {
            0%, 100% { 
                transform: perspective(1000px) rotateY(-2deg) rotateX(1deg) translateY(0px); 
            }
            50% { 
                transform: perspective(1000px) rotateY(-2deg) rotateX(1deg) translateY(-2px); 
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <canvas id="canvas" width="405" height="720"></canvas>
        <div class="pencil" id="pencil">
            <div class="pencil-eraser"></div>
            <div class="pencil-metal"></div>
            <div class="pencil-body"></div>
            <div class="pencil-wood"></div>
            <div class="pencil-tip"></div>
        </div>
    </div>

    <script>
       const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');
const pencil = document.getElementById('pencil');

let startTime = Date.now();
let currentPath = [];
let pathIndex = 0;
let danceStartTime = 0;
let isDancing = false;

// Enhanced SpongeBob data with better proportions
const spongebobData = {
    // Main body with more natural curves
    body: [
        {x: 140, y: 180}, {x: 200, y: 175}, {x: 260, y: 180}, {x: 270, y: 200},
        {x: 275, y: 240}, {x: 280, y: 280}, {x: 275, y: 320}, {x: 280, y: 360},
        {x: 275, y: 400}, {x: 280, y: 440}, {x: 275, y: 480}, {x: 270, y: 520},
        {x: 260, y: 550}, {x: 200, y: 555}, {x: 140, y: 550}, {x: 130, y: 520},
        {x: 125, y: 480}, {x: 130, y: 440}, {x: 125, y: 400}, {x: 130, y: 360},
        {x: 125, y: 320}, {x: 130, y: 280}, {x: 125, y: 240}, {x: 130, y: 200},
        {x: 140, y: 180}
    ],
    
    // Enhanced eye shapes
    leftEye: [
        {x: 140, y: 250}, {x: 165, y: 235}, {x: 185, y: 250}, {x: 180, y: 275},
        {x: 165, y: 285}, {x: 145, y: 275}, {x: 140, y: 250}
    ],
    rightEye: [
        {x: 220, y: 245}, {x: 245, y: 230}, {x: 265, y: 245}, {x: 260, y: 270},
        {x: 245, y: 280}, {x: 225, y: 270}, {x: 220, y: 245}
    ],
    
    // More detailed nose
    nose: [
        {x: 195, y: 295}, {x: 205, y: 290}, {x: 210, y: 300}, {x: 205, y: 315},
        {x: 200, y: 325}, {x: 195, y: 315}, {x: 190, y: 300}, {x: 195, y: 295}
    ],
    
    // Enhanced smile curve
    mouth: [
        {x: 165, y: 365}, {x: 180, y: 375}, {x: 200, y: 380}, {x: 220, y: 375}, {x: 235, y: 365}
    ],
    
    // More expressive arms
    leftArm: [
        {x: 140, y: 320}, {x: 110, y: 330}, {x: 85, y: 345}, {x: 65, y: 365}, {x: 55, y: 385}
    ],
    rightArm: [
        {x: 260, y: 315}, {x: 290, y: 325}, {x: 315, y: 340}, {x: 335, y: 360}, {x: 345, y: 380}
    ],
    
    // Improved legs
    leftLeg: [
        {x: 165, y: 555}, {x: 165, y: 600}, {x: 160, y: 640}, {x: 150, y: 670}, {x: 135, y: 690}
    ],
    rightLeg: [
        {x: 235, y: 555}, {x: 235, y: 600}, {x: 240, y: 640}, {x: 250, y: 670}, {x: 265, y: 690}
    ],
    
    // Better pants outline
    pants: [
        {x: 140, y: 480}, {x: 260, y: 480}, {x: 260, y: 555}, {x: 140, y: 555}, {x: 140, y: 480}
    ]
};

// Enhanced color palette
const colors = {
    yellow: '#FFFF00',
    brown: '#8B4513',
    white: '#FFFFFF',
    black: '#000000',
    red: '#DC143C',
    blue: '#4169E1',
    darkBlue: '#000080',
    pink: '#FFB6C1',
    lightBrown: '#CD853F',
    darkBrown: '#654321'
};

// Enhanced dust effect with more particles
function createDrawingDust(x, y) {
    for (let i = 0; i < 3; i++) {
        const dust = document.createElement('div');
        dust.className = 'drawing-dust';
        dust.style.left = (x - 1 + Math.random() * 6) + 'px';
        dust.style.top = (y - 1 + Math.random() * 6) + 'px';
        dust.style.background = `hsl(${Math.random() * 60 + 30}, 70%, 60%)`;
        dust.style.transform = `scale(${0.5 + Math.random() * 0.5})`;
        document.querySelector('.container').appendChild(dust);
        
        setTimeout(() => dust.remove(), 1000 + Math.random() * 500);
    }
}

// Improved path drawing with smoother curves
function drawPath(points, progress, strokeStyle = '#333', lineWidth = 2, offset = {x: 0, y: 0}) {
    if (points.length < 2 || progress <= 0) return;
    
    ctx.strokeStyle = strokeStyle;
    ctx.lineWidth = lineWidth;
    ctx.lineCap = 'round';
    ctx.lineJoin = 'round';
    
    const totalLength = points.length - 1;
    const currentProgress = Math.min(progress * totalLength, totalLength);
    const wholeSegments = Math.floor(currentProgress);
    const partialSegment = currentProgress - wholeSegments;
    
    ctx.beginPath();
    ctx.moveTo(points[0].x + offset.x, points[0].y + offset.y);
    
    // Draw complete segments with smooth curves
    for (let i = 1; i <= wholeSegments; i++) {
        const point = points[i];
        ctx.lineTo(point.x + offset.x, point.y + offset.y);
    }
    
    // Draw partial segment
    if (wholeSegments < totalLength && partialSegment > 0) {
        const start = points[wholeSegments];
        const end = points[wholeSegments + 1];
        const currentX = start.x + (end.x - start.x) * partialSegment + offset.x;
        const currentY = start.y + (end.y - start.y) * partialSegment + offset.y;
        
        ctx.lineTo(currentX, currentY);
        
        // Enhanced pencil movement with smooth rotation
        const angle = Math.atan2(end.y - start.y, end.x - start.x);
        pencil.style.left = (currentX - 60) + 'px';
        pencil.style.top = (currentY - 6) + 'px';
        pencil.style.transform = `rotate(${angle}rad)`;
        
        // Enhanced dust effect
        if (Math.random() < 0.4) {
            createDrawingDust(currentX, currentY);
        }
    }
    
    ctx.stroke();
}

// Enhanced fill function with offset support
function fillArea(points, color, offset = {x: 0, y: 0}) {
    if (points.length < 3) return;
    
    ctx.fillStyle = color;
    ctx.beginPath();
    ctx.moveTo(points[0].x + offset.x, points[0].y + offset.y);
    
    for (let i = 1; i < points.length; i++) {
        ctx.lineTo(points[i].x + offset.x, points[i].y + offset.y);
    }
    
    ctx.closePath();
    ctx.fill();
}

// Enhanced SpongeBob details with better shading
function drawSpongeBobDetails(offset = {x: 0, y: 0}) {
    const ox = offset.x;
    const oy = offset.y;
    
    // Eyes with gradient effect
    const eyeGradient = ctx.createRadialGradient(162 + ox, 260 + oy, 5, 162 + ox, 260 + oy, 22);
    eyeGradient.addColorStop(0, colors.white);
    eyeGradient.addColorStop(1, '#F0F0F0');
    
    ctx.fillStyle = eyeGradient;
    ctx.beginPath();
    ctx.arc(162 + ox, 260 + oy, 22, 0, 2 * Math.PI);
    ctx.fill();
    ctx.beginPath();
    ctx.arc(242 + ox, 257 + oy, 22, 0, 2 * Math.PI);
    ctx.fill();
    
    // Enhanced eye outlines with shadow
    ctx.shadowColor = 'rgba(0,0,0,0.3)';
    ctx.shadowBlur = 3;
    ctx.shadowOffsetX = 2;
    ctx.shadowOffsetY = 2;
    ctx.strokeStyle = colors.black;
    ctx.lineWidth = 3;
    ctx.beginPath();
    ctx.arc(162 + ox, 260 + oy, 22, 0, 2 * Math.PI);
    ctx.stroke();
    ctx.beginPath();
    ctx.arc(242 + ox, 257 + oy, 22, 0, 2 * Math.PI);
    ctx.stroke();
    ctx.shadowBlur = 0;
    
    // Animated pupils with slight movement
    const pupilOffset = isDancing ? Math.sin(Date.now() * 0.01) * 2 : 0;
    ctx.fillStyle = colors.black;
    ctx.beginPath();
    ctx.arc(170 + ox + pupilOffset, 268 + oy, 6, 0, 2 * Math.PI);
    ctx.fill();
    ctx.beginPath();
    ctx.arc(235 + ox - pupilOffset, 265 + oy, 6, 0, 2 * Math.PI);
    ctx.fill();
    
    // Enhanced eye shine
    ctx.fillStyle = colors.white;
    ctx.beginPath();
    ctx.arc(173 + ox + pupilOffset, 265 + oy, 2.5, 0, 2 * Math.PI);
    ctx.fill();
    ctx.beginPath();
    ctx.arc(237 + ox - pupilOffset, 262 + oy, 2.5, 0, 2 * Math.PI);
    ctx.fill();
    
    // 3D nose with gradient
    const noseGradient = ctx.createLinearGradient(190 + ox, 290 + oy, 210 + ox, 326 + oy);
    noseGradient.addColorStop(0, colors.yellow);
    noseGradient.addColorStop(0.5, '#FFFF88');
    noseGradient.addColorStop(1, '#DDDD00');
    
    ctx.fillStyle = noseGradient;
    ctx.beginPath();
    ctx.ellipse(200 + ox, 308 + oy, 10, 18, 0, 0, 2 * Math.PI);
    ctx.fill();
    ctx.strokeStyle = colors.black;
    ctx.lineWidth = 2;
    ctx.stroke();
    
    // Enhanced nostrils
    ctx.fillStyle = colors.black;
    ctx.beginPath();
    ctx.ellipse(198 + ox, 305 + oy, 2, 1.5, 0, 0, 2 * Math.PI);
    ctx.fill();
    ctx.beginPath();
    ctx.ellipse(202 + ox, 305 + oy, 2, 1.5, 0, 0, 2 * Math.PI);
    ctx.fill();
    
    // Animated mouth with expression changes
    const mouthOffset = isDancing ? Math.sin(Date.now() * 0.008) * 3 : 0;
    ctx.strokeStyle = colors.black;
    ctx.lineWidth = 4;
    ctx.beginPath();
    ctx.arc(200 + ox, 365 + oy + mouthOffset, 30, 0.1, Math.PI - 0.1);
    ctx.stroke();
    
    // Enhanced teeth with individual styling
    ctx.fillStyle = colors.white;
    ctx.strokeStyle = colors.black;
    ctx.lineWidth = 1.5;
    for (let i = 0; i < 2; i++) {
        const x = 190 + i * 20 + ox;
        const y = 380 + oy + mouthOffset;
        ctx.fillRect(x, y, 10, 15);
        ctx.strokeRect(x, y, 10, 15);
        
        // Add small gap between teeth
        ctx.strokeStyle = colors.black;
        ctx.lineWidth = 1;
        ctx.beginPath();
        ctx.moveTo(x + 5, y);
        ctx.lineTo(x + 5, y + 15);
        ctx.stroke();
    }
    
    // Enhanced pants with texture
    const pantsGradient = ctx.createLinearGradient(140 + ox, 480 + oy, 260 + ox, 555 + oy);
    pantsGradient.addColorStop(0, colors.brown);
    pantsGradient.addColorStop(0.5, colors.lightBrown);
    pantsGradient.addColorStop(1, colors.darkBrown);
    
    fillArea(spongebobData.pants, pantsGradient, offset);
    
    // Enhanced belt with metallic look
    const beltGradient = ctx.createLinearGradient(140 + ox, 480 + oy, 140 + ox, 488 + oy);
    beltGradient.addColorStop(0, '#333');
    beltGradient.addColorStop(0.5, colors.black);
    beltGradient.addColorStop(1, '#333');
    
    ctx.fillStyle = beltGradient;
    ctx.fillRect(140 + ox, 480 + oy, 120, 8);
    
    // 3D belt buckle
    const buckleGradient = ctx.createRadialGradient(200 + ox, 484 + oy, 2, 200 + ox, 484 + oy, 15);
    buckleGradient.addColorStop(0, '#FFD700');
    buckleGradient.addColorStop(0.7, colors.yellow);
    buckleGradient.addColorStop(1, '#B8860B');
    
    ctx.fillStyle = buckleGradient;
    ctx.fillRect(190 + ox, 475 + oy, 20, 18);
    ctx.strokeStyle = colors.black;
    ctx.lineWidth = 2;
    ctx.strokeRect(190 + ox, 475 + oy, 20, 18);
    
    // Enhanced SpongeBob holes with variety
    const holes = [
        {x: 155, y: 220, r: 4}, {x: 185, y: 210, r: 3}, {x: 225, y: 215, r: 4},
        {x: 245, y: 235, r: 3}, {x: 170, y: 340, r: 5}, {x: 230, y: 335, r: 4},
        {x: 160, y: 390, r: 3}, {x: 200, y: 420, r: 4}, {x: 240, y: 415, r: 3},
        {x: 175, y: 450, r: 4}, {x: 220, y: 445, r: 3}, {x: 155, y: 510, r: 3},
        {x: 245, y: 505, r: 4}, {x: 180, y: 260, r: 2}, {x: 210, y: 250, r: 3}
    ];
    
    holes.forEach(hole => {
        const holeGradient = ctx.createRadialGradient(
            hole.x + ox, hole.y + oy, 0,
            hole.x + ox, hole.y + oy, hole.r
        );
        holeGradient.addColorStop(0, colors.darkBrown);
        holeGradient.addColorStop(1, colors.brown);
        
        ctx.fillStyle = holeGradient;
        ctx.beginPath();
        ctx.arc(hole.x + ox, hole.y + oy, hole.r, 0, 2 * Math.PI);
        ctx.fill();
    });
    
    // Enhanced shoes with 3D effect
    const shoeGradient = ctx.createRadialGradient(135 + ox, 690 + oy, 5, 135 + ox, 700 + oy, 25);
    shoeGradient.addColorStop(0, '#333');
    shoeGradient.addColorStop(0.7, colors.black);
    shoeGradient.addColorStop(1, '#111');
    
    ctx.fillStyle = shoeGradient;
    ctx.beginPath();
    ctx.ellipse(135 + ox, 695 + oy, 25, 12, 0, 0, 2 * Math.PI);
    ctx.fill();
    ctx.beginPath();
    ctx.ellipse(265 + ox, 695 + oy, 25, 12, 0, 0, 2 * Math.PI);
    ctx.fill();
    
    // Enhanced shoe laces
    ctx.strokeStyle = colors.white;
    ctx.lineWidth = 2;
    ctx.lineCap = 'round';
    
    // Left shoe laces
    ctx.beginPath();
    ctx.moveTo(125 + ox, 690 + oy);
    ctx.lineTo(145 + ox, 690 + oy);
    ctx.stroke();
    ctx.beginPath();
    ctx.moveTo(130 + ox, 687 + oy);
    ctx.lineTo(140 + ox, 687 + oy);
    ctx.stroke();
    
    // Right shoe laces
    ctx.beginPath();
    ctx.moveTo(255 + ox, 690 + oy);
    ctx.lineTo(275 + ox, 690 + oy);
    ctx.stroke();
    ctx.beginPath();
    ctx.moveTo(260 + ox, 687 + oy);
    ctx.lineTo(270 + ox, 687 + oy);
    ctx.stroke();
}

// Dancing animation function
function getDanceOffset(time) {
    const t = time * 0.003; // Slow down the dance
    return {
        x: Math.sin(t) * 3,
        y: Math.sin(t * 2) * 2,
        bodyBounce: Math.sin(t * 3) * 1,
        armSwing: Math.sin(t * 1.5) * 10
    };
}

// Enhanced animation function
function animate() {
    const elapsed = Date.now() - startTime;
    const totalDuration = 25000; // Extended to 25 seconds
    
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    
    // Phase 1: Rough Sketch (0-8 seconds)
    if (elapsed < 8000) {
        pencil.style.opacity = '1';
        const progress = elapsed / 8000;
        
        if (progress < 0.35) {
            const bodyProgress = Math.min(progress * 2.8, 1);
            drawPath(spongebobData.body, bodyProgress, '#666', 1.5);
        }
        if (progress >= 0.2 && progress < 0.55) {
            const eyeProgress = Math.min((progress - 0.2) * 2.8, 1);
            drawPath(spongebobData.leftEye, eyeProgress, '#666', 1.5);
            if (eyeProgress > 0.5) {
                drawPath(spongebobData.rightEye, (eyeProgress - 0.5) * 2, '#666', 1.5);
            }
        }
        if (progress >= 0.4 && progress < 0.7) {
            const faceProgress = Math.min((progress - 0.4) * 3.3, 1);
            drawPath(spongebobData.nose, faceProgress, '#666', 1.5);
            if (faceProgress > 0.3) {
                drawPath(spongebobData.mouth, (faceProgress - 0.3) * 1.4, '#666', 1.5);
            }
        }
        if (progress >= 0.6) {
            const limbProgress = Math.min((progress - 0.6) * 2.5, 1);
            drawPath(spongebobData.leftArm, limbProgress, '#666', 1.5);
            drawPath(spongebobData.rightArm, limbProgress, '#666', 1.5);
            if (limbProgress > 0.4) {
                drawPath(spongebobData.leftLeg, (limbProgress - 0.4) * 1.7, '#666', 1.5);
                drawPath(spongebobData.rightLeg, (limbProgress - 0.4) * 1.7, '#666', 1.5);
            }
        }
        if (progress >= 0.8) {
            const pantsProgress = Math.min((progress - 0.8) * 5, 1);
            drawPath(spongebobData.pants, pantsProgress, '#666', 1.5);
        }
    }
    // Phase 2: Clean Inking (8-15 seconds)
    else if (elapsed < 15000) {
        pencil.style.opacity = '1';
        const progress = (elapsed - 8000) / 7000;
        
        // Redraw everything with clean black lines
        drawPath(spongebobData.body, 1, colors.black, 3);
        drawPath(spongebobData.leftEye, 1, colors.black, 2.5);
        drawPath(spongebobData.rightEye, 1, colors.black, 2.5);
        drawPath(spongebobData.nose, 1, colors.black, 2);
        drawPath(spongebobData.mouth, 1, colors.black, 3);
        drawPath(spongebobData.leftArm, 1, colors.black, 2.5);
        drawPath(spongebobData.rightArm, 1, colors.black, 2.5);
        drawPath(spongebobData.leftLeg, 1, colors.black, 2.5);
        drawPath(spongebobData.rightLeg, 1, colors.black, 2.5);
        drawPath(spongebobData.pants, 1, colors.black, 2.5);
        
        // Animate pencil cleaning up lines
        const animProgress = progress * 9;
        const currentSection = Math.floor(animProgress);
        const sections = [
            spongebobData.body, spongebobData.leftEye, spongebobData.rightEye,
            spongebobData.nose, spongebobData.mouth, spongebobData.leftArm,
            spongebobData.rightArm, spongebobData.leftLeg, spongebobData.pants
        ];
        
        if (currentSection < sections.length) {
            const sectionProgress = animProgress - currentSection;
            const section = sections[currentSection];
            if (section && section.length > 0) {
                const point = section[Math.floor(sectionProgress * (section.length - 1))];
                if (point) {
                    pencil.style.left = (point.x - 60) + 'px';
                    pencil.style.top = (point.y - 6) + 'px';
                }
            }
        }
    }
    // Phase 3: Coloring (15-22 seconds)
    else if (elapsed < 22000) {
        pencil.style.opacity = '0';
        const colorProgress = (elapsed - 15000) / 7000;
        
        // Gradual coloring effect
        if (colorProgress > 0.2) {
            fillArea(spongebobData.body, colors.yellow);
        }
        
        if (colorProgress > 0.5) {
            drawSpongeBobDetails();
        }
        
        // Final clean outlines
        drawPath(spongebobData.body, 1, colors.black, 3);
        drawPath(spongebobData.leftArm, 1, colors.black, 2.5);
        drawPath(spongebobData.rightArm, 1, colors.black, 2.5);
        drawPath(spongebobData.leftLeg, 1, colors.black, 2.5);
        drawPath(spongebobData.rightLeg, 1, colors.black, 2.5);
    }
    // Phase 4: Dancing Animation (22+ seconds)
    else {
        if (!isDancing) {
            isDancing = true;
            danceStartTime = Date.now();
        }
        
        pencil.style.opacity = '0';
        const danceTime = Date.now() - danceStartTime;
        const danceOffset = getDanceOffset(danceTime);
        
        // Apply dance transformations
        const mainOffset = {
            x: danceOffset.x,
            y: danceOffset.y + danceOffset.bodyBounce
        };
        
        // Draw dancing SpongeBob
        fillArea(spongebobData.body, colors.yellow, mainOffset);
        drawSpongeBobDetails(mainOffset);
        
        // Draw outlines with dance offset
        drawPath(spongebobData.body, 1, colors.black, 3, mainOffset);
        
        // Animated arms with extra swing
        const leftArmOffset = {
            x: mainOffset.x + danceOffset.armSwing,
            y: mainOffset.y
        };
        const rightArmOffset = {
            x: mainOffset.x - danceOffset.armSwing,
            y: mainOffset.y
        };
        
        drawPath(spongebobData.leftArm, 1, colors.black, 2.5, leftArmOffset);
        drawPath(spongebobData.rightArm, 1, colors.black, 2.5, rightArmOffset);
        drawPath(spongebobData.leftLeg, 1, colors.black, 2.5, mainOffset);
        drawPath(spongebobData.rightLeg, 1, colors.black, 2.5, mainOffset);
        
        // Add sparkle effects during dance
        if (Math.random() < 0.1) {
            const sparkleX = 200 + Math.random() * 100 - 50;
            const sparkleY = 300 + Math.random() * 200 - 100;
            createDrawingDust(sparkleX, sparkleY);
        }
        
        // Reset after 8 seconds of dancing
        if (danceTime > 8000) {
            startTime = Date.now();
            isDancing = false;
        }
    }
    
    requestAnimationFrame(animate);
}

// Start animation
animate();
    </script>
</body>
</html>
