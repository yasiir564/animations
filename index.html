<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Batman Drawing Animation</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            font-family: 'Inter', 'Segoe UI', system-ui, sans-serif;
            overflow: hidden;
        }

        .container {
            width: 360px;
            height: 640px;
            position: relative;
            background: 
                linear-gradient(145deg, 
                    rgba(255, 255, 255, 0.98) 0%, 
                    rgba(248, 250, 252, 0.98) 50%,
                    rgba(241, 245, 249, 0.95) 100%);
            border-radius: 28px;
            box-shadow: 
                0 32px 80px rgba(0, 0, 0, 0.25),
                0 16px 40px rgba(0, 0, 0, 0.15),
                inset 0 1px 0 rgba(255, 255, 255, 0.9),
                inset 0 -1px 0 rgba(0, 0, 0, 0.05);
            overflow: hidden;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            transform: perspective(1000px) rotateX(2deg) rotateY(-2deg);
            transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .container:hover {
            transform: perspective(1000px) rotateX(0deg) rotateY(0deg) scale(1.02);
            box-shadow: 
                0 40px 100px rgba(0, 0, 0, 0.3),
                0 20px 50px rgba(0, 0, 0, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 1),
                inset 0 -1px 0 rgba(0, 0, 0, 0.05);
        }

        .paper {
            width: 100%;
            height: 100%;
            background: 
                linear-gradient(45deg, transparent 24%, rgba(255,255,255,0.1) 25%, rgba(255,255,255,0.1) 26%, transparent 27%, transparent 74%, rgba(255,255,255,0.1) 75%, rgba(255,255,255,0.1) 76%, transparent 77%),
                linear-gradient(-45deg, transparent 24%, rgba(0,0,0,0.02) 25%, rgba(0,0,0,0.02) 26%, transparent 27%, transparent 74%, rgba(0,0,0,0.02) 75%, rgba(0,0,0,0.02) 76%, transparent 77%),
                linear-gradient(90deg, transparent 0%, rgba(0,0,0,0.01) 50%, transparent 100%),
                #ffffff;
            background-size: 30px 30px, 30px 30px, 100% 100%, auto;
            position: relative;
            border-radius: 28px;
        }

        .paper::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 80%, rgba(0,0,0,0.015) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(0,0,0,0.015) 0%, transparent 50%),
                radial-gradient(circle at 50% 50%, rgba(255,255,255,0.8) 0%, transparent 70%);
            border-radius: 28px;
            pointer-events: none;
        }

        .paper::after {
            content: '';
            position: absolute;
            top: 15px;
            left: 15px;
            right: 15px;
            bottom: 15px;
            border-radius: 20px;
            background: 
                linear-gradient(135deg, 
                    rgba(255, 255, 255, 0.4) 0%, 
                    transparent 30%, 
                    rgba(0, 0, 0, 0.01) 100%);
            pointer-events: none;
        }

        .batman-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 48px;
            font-weight: 900;
            color: #1a1a1a;
            text-shadow: 
                2px 2px 4px rgba(0, 0, 0, 0.1),
                0 0 20px rgba(0, 0, 0, 0.05);
            letter-spacing: 2px;
            font-family: 'Impact', 'Arial Black', sans-serif;
            z-index: 5;
            opacity: 0.9;
            background: linear-gradient(135deg, #2d2d2d 0%, #1a1a1a 50%, #000000 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: textGlow 3s ease-in-out infinite alternate;
        }

        @keyframes textGlow {
            0% {
                filter: drop-shadow(0 0 5px rgba(0, 0, 0, 0.2));
                transform: translate(-50%, -50%) scale(1);
            }
            100% {
                filter: drop-shadow(0 0 15px rgba(0, 0, 0, 0.3));
                transform: translate(-50%, -50%) scale(1.02);
            }
        }

        canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 28px;
            cursor: crosshair;
            transition: filter 0.3s ease;
        }

        canvas:hover {
            filter: brightness(1.01);
        }

        .pencil {
            position: absolute;
            width: 120px;
            height: 8px;
            background: linear-gradient(90deg, #ffd700 0%, #ffed4e 30%, #8b4513 30%, #a0522d 70%, #ff69b4 70%, #ff1493 100%);
            border-radius: 4px;
            box-shadow: 
                0 4px 12px rgba(0,0,0,0.25),
                0 2px 6px rgba(0,0,0,0.15),
                inset 0 1px 2px rgba(255,255,255,0.3);
            transform-origin: 100% 50%;
            opacity: 0;
            z-index: 10;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .pencil::before {
            content: '';
            position: absolute;
            right: -8px;
            top: 50%;
            transform: translateY(-50%);
            width: 0;
            height: 0;
            border-left: 8px solid #8b4513;
            border-top: 4px solid transparent;
            border-bottom: 4px solid transparent;
            filter: drop-shadow(1px 1px 2px rgba(0,0,0,0.3));
        }

        .pencil::after {
            content: '';
            position: absolute;
            right: -10px;
            top: 50%;
            transform: translateY(-50%);
            width: 2px;
            height: 2px;
            background: #333;
            border-radius: 50%;
            box-shadow: 0 0 2px rgba(0,0,0,0.5);
        }

        @keyframes containerEntrance {
            0% { 
                opacity: 0; 
                transform: perspective(1000px) rotateX(30deg) rotateY(-30deg) scale(0.8) translateY(50px);
                filter: blur(8px);
            }
            50% {
                opacity: 0.8;
                transform: perspective(1000px) rotateX(10deg) rotateY(-10deg) scale(0.95) translateY(10px);
                filter: blur(2px);
            }
            100% { 
                opacity: 1; 
                transform: perspective(1000px) rotateX(2deg) rotateY(-2deg) scale(1) translateY(0);
                filter: blur(0px);
            }
        }

        @keyframes paperTexture {
            0%, 100% { 
                background-size: 30px 30px, 30px 30px, 100% 100%, auto;
            }
            50% { 
                background-size: 32px 32px, 32px 32px, 100% 100%, auto;
            }
        }

        @keyframes pencilFloat {
            0%, 100% { 
                transform: translateY(0px) rotate(0deg);
                opacity: 0;
            }
            20% {
                opacity: 0.7;
            }
            50% { 
                transform: translateY(-3px) rotate(1deg);
                opacity: 1;
            }
            80% {
                opacity: 0.7;
            }
        }

        .container {
            animation: 
                containerEntrance 1.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .paper {
            animation: paperTexture 8s ease-in-out infinite 2s;
        }

        .pencil {
            animation: pencilFloat 5s ease-in-out infinite 2.5s;
        }

        .batman-text {
            animation: textGlow 3s ease-in-out infinite alternate 1s;
        }

        /* Enhanced paper lines for notebook feel */
        .paper-lines {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                repeating-linear-gradient(
                    transparent,
                    transparent 35px,
                    rgba(0, 150, 255, 0.1) 35px,
                    rgba(0, 150, 255, 0.1) 36px
                );
            border-radius: 28px;
            pointer-events: none;
            z-index: 1;
        }

        /* Red margin line */
        .paper-margin {
            position: absolute;
            top: 0;
            left: 50px;
            width: 1px;
            height: 100%;
            background: rgba(255, 0, 0, 0.2);
            z-index: 2;
            pointer-events: none;
        }

        /* Responsive design */
        @media (max-width: 480px) {
            .container {
                width: 320px;
                height: 568px;
                border-radius: 24px;
            }
            
            .paper {
                border-radius: 24px;
            }
            
            .paper::before {
                border-radius: 24px;
            }
            
            .paper::after {
                border-radius: 16px;
            }
            
            .paper-lines {
                border-radius: 24px;
            }
            
            canvas {
                border-radius: 24px;
            }
            
            .batman-text {
                font-size: 36px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="paper">
            <canvas id="drawingCanvas"></canvas>
            <div class="pencil" id="pencil"></div>
        </div>
    </div>

    <script>
const canvas = document.getElementById('drawingCanvas');
const ctx = canvas.getContext('2d');
const pencil = document.getElementById('pencil');

// Set 4K canvas size for ultra-crisp rendering
canvas.width = 1440;
canvas.height = 2560;
canvas.style.width = '360px';
canvas.style.height = '640px';

// Enable high-quality rendering
ctx.imageSmoothingEnabled = true;
ctx.imageSmoothingQuality = 'high';

let animationProgress = 0;
let drawnPoints = [];
let isAnimating = false;

// Highly accurate Batman silhouette path
const batmanOutline = [
    // Head top
    {x: 720, y: 300}, {x: 680, y: 280}, {x: 650, y: 290}, {x: 620, y: 310},
    {x: 600, y: 340}, {x: 590, y: 380}, {x: 595, y: 420}, {x: 610, y: 450},
    {x: 635, y: 470}, {x: 665, y: 480}, {x: 700, y: 485}, {x: 720, y: 488},
    {x: 740, y: 485}, {x: 775, y: 480}, {x: 805, y: 470}, {x: 830, y: 450},
    {x: 845, y: 420}, {x: 850, y: 380}, {x: 840, y: 340}, {x: 820, y: 310},
    {x: 790, y: 290}, {x: 760, y: 280},
    
    // Left ear
    {x: 680, y: 280}, {x: 650, y: 220}, {x: 665, y: 240}, {x: 685, y: 250},
    
    // Right ear
    {x: 760, y: 280}, {x: 790, y: 220}, {x: 775, y: 240}, {x: 755, y: 250},
    
    // Neck and shoulders
    {x: 635, y: 470}, {x: 620, y: 500}, {x: 600, y: 540}, {x: 580, y: 580},
    {x: 805, y: 470}, {x: 820, y: 500}, {x: 840, y: 540}, {x: 860, y: 580},
    
    // Left cape outer edge
    {x: 580, y: 580}, {x: 520, y: 620}, {x: 480, y: 680}, {x: 450, y: 750},
    {x: 430, y: 830}, {x: 420, y: 920}, {x: 425, y: 1010}, {x: 440, y: 1100},
    {x: 465, y: 1180}, {x: 500, y: 1250}, {x: 545, y: 1310}, {x: 600, y: 1360},
    {x: 660, y: 1400}, {x: 720, y: 1420},
    
    // Right cape outer edge
    {x: 860, y: 580}, {x: 920, y: 620}, {x: 960, y: 680}, {x: 990, y: 750},
    {x: 1010, y: 830}, {x: 1020, y: 920}, {x: 1015, y: 1010}, {x: 1000, y: 1100},
    {x: 975, y: 1180}, {x: 940, y: 1250}, {x: 895, y: 1310}, {x: 840, y: 1360},
    {x: 780, y: 1400}, {x: 720, y: 1420},
    
    // Torso inner outline
    {x: 620, y: 540}, {x: 610, y: 580}, {x: 605, y: 620}, {x: 600, y: 660},
    {x: 605, y: 700}, {x: 620, y: 740}, {x: 645, y: 780}, {x: 675, y: 810},
    {x: 710, y: 830}, {x: 720, y: 840}, {x: 730, y: 830}, {x: 765, y: 810},
    {x: 795, y: 780}, {x: 820, y: 740}, {x: 835, y: 700}, {x: 840, y: 660},
    {x: 835, y: 620}, {x: 830, y: 580}, {x: 820, y: 540},
    
    // Arms
    {x: 600, y: 580}, {x: 560, y: 600}, {x: 530, y: 630}, {x: 520, y: 670},
    {x: 525, y: 710}, {x: 540, y: 740},
    {x: 840, y: 580}, {x: 880, y: 600}, {x: 910, y: 630}, {x: 920, y: 670},
    {x: 915, y: 710}, {x: 900, y: 740},
    
    // Bat symbol center
    {x: 720, y: 720}, {x: 700, y: 740}, {x: 680, y: 750}, {x: 665, y: 770},
    {x: 680, y: 780}, {x: 700, y: 775}, {x: 720, y: 780}, {x: 740, y: 775},
    {x: 760, y: 780}, {x: 775, y: 770}, {x: 760, y: 750}, {x: 740, y: 740}
];

// Facial features paths
const eyeOutlines = [
    // Left eye
    [{x: 680, y: 380}, {x: 670, y: 390}, {x: 680, y: 400}, {x: 690, y: 390}],
    // Right eye  
    [{x: 760, y: 380}, {x: 750, y: 390}, {x: 760, y: 400}, {x: 770, y: 390}]
];

const mouthOutline = [
    {x: 705, y: 420}, {x: 720, y: 430}, {x: 735, y: 420}
];

function drawPencilPhase(progress) {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    
    // Pencil stroke style
    ctx.strokeStyle = '#666';
    ctx.lineWidth = 3;
    ctx.lineCap = 'round';
    ctx.lineJoin = 'round';
    ctx.shadowColor = 'rgba(0,0,0,0.2)';
    ctx.shadowBlur = 2;
    ctx.shadowOffsetX = 1;
    ctx.shadowOffsetY = 1;
    
    const totalPoints = Math.floor(progress * batmanOutline.length);
    
    if (totalPoints > drawnPoints.length) {
        for (let i = drawnPoints.length; i < totalPoints && i < batmanOutline.length; i++) {
            drawnPoints.push(batmanOutline[i]);
        }
    }
    
    if (drawnPoints.length > 1) {
        ctx.beginPath();
        ctx.moveTo(drawnPoints[0].x, drawnPoints[0].y);
        
        for (let i = 1; i < drawnPoints.length; i++) {
            // Add slight pencil texture variation
            const jitterX = (Math.random() - 0.5) * 2;
            const jitterY = (Math.random() - 0.5) * 2;
            ctx.lineTo(drawnPoints[i].x + jitterX, drawnPoints[i].y + jitterY);
        }
        ctx.stroke();
    }
    
    // Position pencil
    if (pencil && drawnPoints.length > 0) {
        const lastPoint = drawnPoints[drawnPoints.length - 1];
        pencil.style.left = (lastPoint.x / 4 - 15) + 'px';
        pencil.style.top = (lastPoint.y / 4 - 10) + 'px';
        pencil.style.opacity = '1';
        
        if (drawnPoints.length > 1) {
            const prevPoint = drawnPoints[drawnPoints.length - 2];
            const angle = Math.atan2(lastPoint.y - prevPoint.y, lastPoint.x - prevPoint.x);
            pencil.style.transform = `rotate(${angle + Math.PI/4}rad)`;
        }
    }
}

function drawInkPhase() {
    if (pencil) pencil.style.opacity = '0';
    
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    ctx.shadowColor = 'transparent';
    
    // Clean ink outline
    ctx.strokeStyle = '#000';
    ctx.lineWidth = 4;
    ctx.lineCap = 'round';
    ctx.lineJoin = 'round';
    
    ctx.beginPath();
    ctx.moveTo(batmanOutline[0].x, batmanOutline[0].y);
    for (let i = 1; i < batmanOutline.length; i++) {
        ctx.lineTo(batmanOutline[i].x, batmanOutline[i].y);
    }
    ctx.stroke();
    
    // Add facial features
    ctx.fillStyle = '#fff';
    
    // Eyes (white base)
    ctx.beginPath();
    ctx.ellipse(680, 390, 12, 16, -0.1, 0, Math.PI * 2);
    ctx.fill();
    
    ctx.beginPath();
    ctx.ellipse(760, 390, 12, 16, 0.1, 0, Math.PI * 2);
    ctx.fill();
    
    // Eye pupils
    ctx.fillStyle = '#000';
    ctx.beginPath();
    ctx.ellipse(680, 395, 6, 8, 0, 0, Math.PI * 2);
    ctx.fill();
    
    ctx.beginPath();
    ctx.ellipse(760, 395, 6, 8, 0, 0, Math.PI * 2);
    ctx.fill();
    
    // Mouth
    ctx.strokeStyle = '#000';
    ctx.lineWidth = 3;
    ctx.beginPath();
    ctx.moveTo(705, 425);
    ctx.quadraticCurveTo(720, 435, 735, 425);
    ctx.stroke();
    
    // Nose definition
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(720, 400);
    ctx.lineTo(715, 415);
    ctx.moveTo(720, 400);
    ctx.lineTo(725, 415);
    ctx.stroke();
}

function drawColorPhase() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    
    // Cape gradient (deep blue-black)
    const capeGradient = ctx.createLinearGradient(450, 600, 990, 1400);
    capeGradient.addColorStop(0, '#0a0e1a');
    capeGradient.addColorStop(0.3, '#1a1a2e');
    capeGradient.addColorStop(0.7, '#16213e');
    capeGradient.addColorStop(1, '#0a0e1a');
    
    ctx.fillStyle = capeGradient;
    ctx.beginPath();
    // Cape outline
    ctx.moveTo(580, 580);
    ctx.lineTo(520, 620);
    ctx.lineTo(480, 680);
    ctx.lineTo(450, 750);
    ctx.lineTo(430, 830);
    ctx.lineTo(420, 920);
    ctx.lineTo(425, 1010);
    ctx.lineTo(440, 1100);
    ctx.lineTo(465, 1180);
    ctx.lineTo(500, 1250);
    ctx.lineTo(545, 1310);
    ctx.lineTo(600, 1360);
    ctx.lineTo(660, 1400);
    ctx.lineTo(720, 1420);
    ctx.lineTo(780, 1400);
    ctx.lineTo(840, 1360);
    ctx.lineTo(895, 1310);
    ctx.lineTo(940, 1250);
    ctx.lineTo(975, 1180);
    ctx.lineTo(1000, 1100);
    ctx.lineTo(1015, 1010);
    ctx.lineTo(1020, 920);
    ctx.lineTo(1010, 830);
    ctx.lineTo(990, 750);
    ctx.lineTo(960, 680);
    ctx.lineTo(920, 620);
    ctx.lineTo(860, 580);
    ctx.closePath();
    ctx.fill();
    
    // Body suit (charcoal gray)
    const suitGradient = ctx.createRadialGradient(720, 700, 0, 720, 700, 200);
    suitGradient.addColorStop(0, '#34495e');
    suitGradient.addColorStop(0.6, '#2c3e50');
    suitGradient.addColorStop(1, '#1a252f');
    
    ctx.fillStyle = suitGradient;
    ctx.beginPath();
    ctx.moveTo(620, 540);
    ctx.lineTo(610, 580);
    ctx.lineTo(605, 620);
    ctx.lineTo(600, 660);
    ctx.lineTo(605, 700);
    ctx.lineTo(620, 740);
    ctx.lineTo(645, 780);
    ctx.lineTo(675, 810);
    ctx.lineTo(710, 830);
    ctx.lineTo(720, 840);
    ctx.lineTo(730, 830);
    ctx.lineTo(765, 810);
    ctx.lineTo(795, 780);
    ctx.lineTo(820, 740);
    ctx.lineTo(835, 700);
    ctx.lineTo(840, 660);
    ctx.lineTo(835, 620);
    ctx.lineTo(830, 580);
    ctx.lineTo(820, 540);
    ctx.closePath();
    ctx.fill();
    
    // Cowl (deep black)
    ctx.fillStyle = '#000';
    ctx.beginPath();
    ctx.moveTo(720, 300);
    ctx.lineTo(680, 280);
    ctx.lineTo(650, 290);
    ctx.lineTo(620, 310);
    ctx.lineTo(600, 340);
    ctx.lineTo(590, 380);
    ctx.lineTo(595, 420);
    ctx.lineTo(610, 450);
    ctx.lineTo(635, 470);
    ctx.lineTo(665, 480);
    ctx.lineTo(700, 485);
    ctx.lineTo(720, 488);
    ctx.lineTo(740, 485);
    ctx.lineTo(775, 480);
    ctx.lineTo(805, 470);
    ctx.lineTo(830, 450);
    ctx.lineTo(845, 420);
    ctx.lineTo(850, 380);
    ctx.lineTo(840, 340);
    ctx.lineTo(820, 310);
    ctx.lineTo(790, 290);
    ctx.lineTo(760, 280);
    ctx.closePath();
    ctx.fill();
    
    // Ears
    ctx.beginPath();
    ctx.moveTo(680, 280);
    ctx.lineTo(650, 220);
    ctx.lineTo(685, 250);
    ctx.closePath();
    ctx.fill();
    
    ctx.beginPath();
    ctx.moveTo(760, 280);
    ctx.lineTo(790, 220);
    ctx.lineTo(755, 250);
    ctx.closePath();
    ctx.fill();
    
    // Bat symbol (bright gold)
    const batSymbolGradient = ctx.createRadialGradient(720, 750, 0, 720, 750, 60);
    batSymbolGradient.addColorStop(0, '#ffd700');
    batSymbolGradient.addColorStop(0.7, '#ffb700');
    batSymbolGradient.addColorStop(1, '#cc9900');
    
    ctx.fillStyle = batSymbolGradient;
    ctx.beginPath();
    ctx.moveTo(720, 720);
    ctx.lineTo(700, 740);
    ctx.lineTo(680, 750);
    ctx.lineTo(665, 770);
    ctx.lineTo(680, 780);
    ctx.lineTo(700, 775);
    ctx.lineTo(720, 780);
    ctx.lineTo(740, 775);
    ctx.lineTo(760, 780);
    ctx.lineTo(775, 770);
    ctx.lineTo(760, 750);
    ctx.lineTo(740, 740);
    ctx.closePath();
    ctx.fill();
    
    // Utility belt
    ctx.fillStyle = '#8b4513';
    ctx.fillRect(600, 830, 240, 25);
    
    // Belt buckle and accessories
    ctx.fillStyle = '#daa520';
    ctx.fillRect(705, 835, 30, 15);
    ctx.fillRect(620, 837, 15, 11);
    ctx.fillRect(805, 837, 15, 11);
    
    // Muscle definition highlights
    ctx.fillStyle = 'rgba(255,255,255,0.15)';
    ctx.beginPath();
    ctx.ellipse(680, 720, 20, 35, -0.3, 0, Math.PI * 2);
    ctx.fill();
    
    ctx.beginPath();
    ctx.ellipse(760, 720, 20, 35, 0.3, 0, Math.PI * 2);
    ctx.fill();
    
    // Face highlight
    ctx.fillStyle = 'rgba(255,255,255,0.2)';
    ctx.beginPath();
    ctx.ellipse(700, 360, 15, 25, -0.2, 0, Math.PI * 2);
    ctx.fill();
    
    // Eyes (piercing white)
    ctx.fillStyle = '#fff';
    ctx.beginPath();
    ctx.ellipse(680, 390, 10, 14, -0.1, 0, Math.PI * 2);
    ctx.fill();
    
    ctx.beginPath();
    ctx.ellipse(760, 390, 10, 14, 0.1, 0, Math.PI * 2);
    ctx.fill();
    
    // Eye pupils
    ctx.fillStyle = '#000';
    ctx.beginPath();
    ctx.ellipse(680, 395, 4, 6, 0, 0, Math.PI * 2);
    ctx.fill();
    
    ctx.beginPath();
    ctx.ellipse(760, 395, 4, 6, 0, 0, Math.PI * 2);
    ctx.fill();
    
    // Final outline
    ctx.strokeStyle = '#000';
    ctx.lineWidth = 3;
    ctx.lineCap = 'round';
    ctx.lineJoin = 'round';
    
    ctx.beginPath();
    ctx.moveTo(batmanOutline[0].x, batmanOutline[0].y);
    for (let i = 1; i < batmanOutline.length; i++) {
        ctx.lineTo(batmanOutline[i].x, batmanOutline[i].y);
    }
    ctx.stroke();
    
    // Cape detail lines
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(550, 700);
    ctx.quadraticCurveTo(580, 900, 560, 1100);
    ctx.moveTo(890, 700);
    ctx.quadraticCurveTo(860, 900, 880, 1100);
    ctx.stroke();
}

function animate() {
    const startTime = Date.now();
    
    function frame() {
        const elapsed = Date.now() - startTime;
        const totalDuration = 35000; // 35 seconds
        const progress = Math.min(elapsed / totalDuration, 1);
        
        // Phase 1: Pencil sketch (0-45%)
        if (progress < 0.45) {
            const phaseProgress = progress / 0.45;
            drawPencilPhase(phaseProgress);
        }
        // Phase 2: Inking (45-70%)
        else if (progress < 0.7) {
            drawInkPhase();
        }
        // Phase 3: Coloring (70-100%)
        else {
            drawColorPhase();
        }
        
        if (progress < 1) {
            requestAnimationFrame(frame);
        } else {
            // Restart after 4 seconds
            setTimeout(() => {
                drawnPoints = [];
                animate();
            }, 4000);
        }
    }
    
    requestAnimationFrame(frame);
}

// Initialize
function init() {
    if (canvas && ctx) {
        setTimeout(animate, 1000);
    }
}

// Start when ready
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', init);
} else {
    init();
}
    </script>
</body>
</html>
